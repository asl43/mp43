<!doctype html>
<html lang="pt-BR">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Extrator e Conversor de √Åudio</title>
    <style>
        :root {
            --primary: #007bff;
            --primary-dark: #0056b3;
            --success: #28a745;
            --success-dark: #1e7e34;
            --warning: #ffc107;
            --warning-dark: #d39e00;
            --danger: #dc3545;
            --danger-dark: #c82333;
            --info: #17a2b8;
            --info-dark: #117a8b;
            --bg-light: #f8f9fa;
            --bg-dark: #343a40;
            --text-dark: #212529;
            --text-light: #f8f9fa;
            --border-color: #dee2e6;
            --card-shadow: 0 0.5rem 1rem rgba(0, 0, 0, 0.05);
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-light);
            color: var(--text-dark);
            margin: 0;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 24px;
        }

        .container {
            width: 100%;
            max-width: 1000px;
            background: #fff;
            border-radius: 12px;
            box-shadow: var(--card-shadow);
            padding: 30px;
            border: 1px solid var(--border-color);
        }

        h1 {
            font-size: 2rem;
            margin: 0 0 8px;
            font-weight: 700;
            color: var(--text-dark);
        }

        p.lead {
            color: #6c757d;
            margin: 0 0 20px;
            font-size: 1.1rem;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            font-size: 0.95rem;
        }

        .alert-warning {
            background-color: #fff3cd;
            border-left: 4px solid var(--warning);
            color: #856404;
        }

        .alert-info {
            background-color: #d1ecf1;
            border-left: 4px solid var(--info);
            color: #0c5460;
        }

        .row {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        @media (max-width: 768px) {
            .row {
                flex-direction: column;
            }
        }
        
        .col {
            flex: 1;
            min-width: 280px;
        }

        label {
            display: block;
            font-size: 0.9rem;
            margin-bottom: 8px;
            font-weight: 600;
            color: #495057;
        }

        .drop-area {
            border: 2px dashed var(--border-color);
            padding: 40px 20px;
            text-align: center;
            font-size: 1rem;
            color: #6c757d;
            margin-bottom: 20px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .drop-area:hover, .drop-area.highlight {
            border-color: var(--primary);
            background-color: #e9f5ff;
            color: var(--primary-dark);
        }
        
        input[type=file] {
            display: none;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            font-size: 0.9rem;
            background-color: #fff;
            transition: border-color 0.2s;
            box-sizing: border-box;
        }
        
        .form-control:focus {
            outline: none;
            border-color: var(--primary);
        }

        .btn {
            padding: 12px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 600;
            border: none;
            transition: all 0.2s ease-in-out;
        }

        .btn-primary {
            background-color: var(--primary);
            color: #fff;
        }
        .btn-primary:hover { background-color: var(--primary-dark); }
        
        .btn-secondary {
            background: transparent;
            color: var(--primary);
            border: 1px solid var(--primary);
        }
        .btn-secondary:hover { background-color: var(--primary-dark); color: #fff; }

        .btn-success {
            background-color: var(--success);
            color: #fff;
        }
        .btn-success:hover { background-color: var(--success-dark); }

        .btn-danger {
            background-color: var(--danger);
            color: #fff;
        }
        .btn-danger:hover { background-color: var(--danger-dark); }
        
        .btn-disabled, .btn:disabled {
            background-color: #adb5bd;
            cursor: not-allowed;
            color: #fff;
        }

        .controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 20px;
        }

        .log {
            height: 150px;
            overflow: auto;
            margin-top: 15px;
            background: #212529;
            color: #d1fae5;
            padding: 15px;
            border-radius: 8px;
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .log .error { color: #dc3545; }
        .log .success { color: #28a745; }
        .log .warning { color: #ffc107; }

        .progress-bar {
            width: 100%;
            height: 10px;
            background: var(--border-color);
            border-radius: 5px;
            overflow: hidden;
            margin: 15px 0;
        }

        .progress-fill {
            height: 100%;
            background: var(--success);
            transition: width 0.3s ease-in-out;
        }
        
        .file-list {
            margin-top: 20px;
        }

        .file-item {
            padding: 15px;
            border-radius: 8px;
            background: #fff;
            margin-bottom: 12px;
            border: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .file-meta {
            font-size: 0.9rem;
            color: #495057;
        }

        .converted-files {
            margin-top: 30px;
        }

        .converted-item {
            padding: 15px;
            background-color: #e2f9e4;
            border: 1px solid #c8e6c9;
            border-radius: 8px;
            margin-bottom: 15px;
        }

        .converted-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .converted-name {
            font-weight: 600;
            color: var(--success-dark);
        }

        .converted-size {
            font-size: 0.8rem;
            color: var(--success-dark);
        }

        .converted-controls {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .method-selector {
            background-color: #e9f5ff;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            border: 1px solid var(--primary);
        }

        .method-option {
            margin: 15px 0;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease-in-out;
        }

        .method-option.selected {
            border-color: var(--primary);
            background-color: #fff;
            box-shadow: 0 0 0 2px rgba(0, 123, 255, 0.25);
        }

        .method-option h4 {
            margin: 0 0 5px;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .method-option p {
            margin: 0;
            font-size: 0.85rem;
            color: #6c757d;
        }

        footer {
            margin-top: 25px;
            font-size: 0.8rem;
            color: #6c757d;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üéµ Extrator e Conversor de √Åudio</h1>
        <p class="lead">Extraia o √°udio de v√≠deos e arquivos de √°udio diretamente no seu navegador.</p>

        <div class="alert alert-warning">
            <strong>‚ö†Ô∏è Limita√ß√£o:</strong> Seu navegador n√£o suporta SharedArrayBuffer. Por isso, a extra√ß√£o de √°udio √© feita usando APIs nativas, e o √°udio de sa√≠da ser√° no formato **WAV**.
        </div>

        <div class="alert alert-info">
            <strong>üí° Dica:</strong> Os arquivos convertidos s√£o salvos neste navegador. Eles n√£o ser√£o perdidos se voc√™ recarregar a p√°gina!
        </div>

        <div class="method-selector">
            <h3>üîß Modo de Convers√£o:</h3>
            
            <div class="method-option selected" data-mode="individual">
                <h4>üóÇÔ∏è Individual</h4>
                <p>Processa cada arquivo separadamente, gerando um arquivo de sa√≠da para cada um.</p>
            </div>
            
            <div class="method-option" data-mode="merged">
                <h4>üîó Mesclado (Merge)</h4>
                <p>Combina todos os arquivos selecionados em um √∫nico arquivo de √°udio de sa√≠da.</p>
            </div>
        </div>

        <div class="method-selector">
            <h3>üî® M√©todo de extra√ß√£o:</h3>
            
            <div class="method-option selected" data-method="web-audio">
                <h4>üéµ Web Audio API (Recomendado)</h4>
                <p>Extrai √°udio usando as APIs nativas do navegador. Ideal para a maioria dos arquivos de √°udio e v√≠deo.</p>
            </div>
            
            <div class="method-option" data-method="media-recorder">
                <h4>üìπ Media Recorder API</h4>
                <p>Reproduz o v√≠deo silenciosamente e grava o √°udio. Pode ser mais lento, mas funciona como uma alternativa robusta.</p>
            </div>
        </div>

        <div class="row">
            <div class="col">
                <label>üìπ Selecionar v√≠deo(s) ou √°udio(s)</label>
                <div class="drop-area" id="dropArea">
                    Arraste e solte arquivos aqui, ou clique para selecionar.
                </div>
                <input id="videoInput" type="file" accept="video/*,audio/*" multiple />

                <div style="margin-top:10px">
                    <label>üéöÔ∏è Qualidade de sa√≠da</label>
                    <select id="quality" class="form-control">
                        <option value="0.7">Qualidade Padr√£o</option>
                        <option value="0.9" selected>Alta Qualidade</option>
                        <option value="1.0">M√°xima Qualidade</option>
                    </select>
                </div>

                <div class="controls">
                    <button id="convertBtn" class="btn btn-primary">üéµ Converter</button>
                    <button id="clearBtn" class="btn btn-danger">üóëÔ∏è Limpar</button>
                    <button id="clearDBBtn" class="btn btn-danger">üóëÔ∏è Limpar Armazenamento</button>
                </div>

                <div class="file-list" id="fileList"></div>
            </div>

            <div class="col">
                <label>üìä Status</label>
                <div class="log" id="log"></div>

                <div style="margin-top:20px">
                    <label>‚öôÔ∏è Progresso</label>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width:0%"></div>
                    </div>
                    <div id="progressText" style="font-size:0.85rem;color:#6c757d">Aguardando...</div>
                </div>
            </div>
        </div>

        <div class="converted-files" id="convertedFiles" style="display:none">
            <h3>üéâ Arquivos Processados</h3>
            <div id="convertedList"></div>
        </div>

        <footer>
            <strong>üîß Modo de Convers√£o:</strong> <span id="currentMode">Individual</span><br>
            <strong>üî® M√©todo de Extra√ß√£o:</strong> <span id="currentMethod">Web Audio API</span>
        </footer>
    </div>

    <script>
        let selectedFiles = [];
        let convertedAudios = [];
        let processingQueue = [];
        let isProcessing = false;
        let conversionMode = 'individual';
        let extractionMethod = 'web-audio';
        let db;

        const DB_NAME = 'audio-converter-db';
        const STORE_NAME = 'converted-audios';

        const elements = {
            videoInput: document.getElementById('videoInput'),
            fileList: document.getElementById('fileList'),
            convertBtn: document.getElementById('convertBtn'),
            clearBtn: document.getElementById('clearBtn'),
            clearDBBtn: document.getElementById('clearDBBtn'),
            log: document.getElementById('log'),
            progressFill: document.getElementById('progressFill'),
            progressText: document.getElementById('progressText'),
            quality: document.getElementById('quality'),
            convertedFiles: document.getElementById('convertedFiles'),
            convertedList: document.getElementById('convertedList'),
            currentMode: document.getElementById('currentMode'),
            currentMethod: document.getElementById('currentMethod'),
            dropArea: document.getElementById('dropArea')
        };

        function log(msg, type = 'info') {
            const time = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.className = type;
            div.textContent = `[${time}] ${msg}`;
            elements.log.appendChild(div);
            elements.log.scrollTop = elements.log.scrollHeight;
        }

        function setProgress(percent, text) {
            elements.progressFill.style.width = `${percent}%`;
            elements.progressText.textContent = text;
        }

        // IndexedDB Functions
        function openDB() {
            return new Promise((resolve, reject) => {
                const request = indexedDB.open(DB_NAME, 1);

                request.onupgradeneeded = (event) => {
                    const db = event.target.result;
                    db.createObjectStore(STORE_NAME, { keyPath: 'id' });
                };

                request.onsuccess = (event) => {
                    db = event.target.result;
                    resolve();
                };

                request.onerror = (event) => {
                    reject(event.target.error);
                };
            });
        }

        async function saveAudioToDB(audioData) {
            const tx = db.transaction(STORE_NAME, 'readwrite');
            const store = tx.objectStore(STORE_NAME);
            const id = `audio-${Date.now()}`;
            const dataToSave = {
                id: id,
                name: audioData.name,
                size: audioData.size,
                blob: audioData.blob
            };
            await store.put(dataToSave);
            return dataToSave;
        }

        async function getAudiosFromDB() {
            const tx = db.transaction(STORE_NAME, 'readonly');
            const store = tx.objectStore(STORE_NAME);
            const request = store.getAll();
            return new Promise((resolve, reject) => {
                request.onsuccess = () => resolve(request.result);
                request.onerror = () => reject(request.error);
            });
        }

        async function deleteAudioFromDB(id) {
            const tx = db.transaction(STORE_NAME, 'readwrite');
            const store = tx.objectStore(STORE_NAME);
            await store.delete(id);
        }

        async function clearDB() {
            const tx = db.transaction(STORE_NAME, 'readwrite');
            const store = tx.objectStore(STORE_NAME);
            await store.clear();
        }

        // UI Functions
        document.querySelectorAll('.method-option').forEach(option => {
            option.addEventListener('click', () => {
                const parent = option.parentElement;
                parent.querySelector('.method-option.selected')?.classList.remove('selected');
                option.classList.add('selected');
                
                if (option.dataset.mode) {
                    conversionMode = option.dataset.mode;
                    elements.currentMode.textContent = option.querySelector('h4').textContent;
                    log(`Modo de convers√£o alterado: ${option.querySelector('h4').textContent}`);
                }
                
                if (option.dataset.method) {
                    extractionMethod = option.dataset.method;
                    elements.currentMethod.textContent = option.querySelector('h4').textContent;
                    log(`M√©todo de extra√ß√£o alterado: ${option.querySelector('h4').textContent}`);
                }
            });
        });

        elements.dropArea.addEventListener('click', () => elements.videoInput.click());
        ['dragenter', 'dragover', 'dragleave', 'drop'].forEach(eventName => {
            elements.dropArea.addEventListener(eventName, e => {
                e.preventDefault();
                e.stopPropagation();
            }, false);
        });

        ['dragenter', 'dragover'].forEach(eventName => {
            elements.dropArea.addEventListener(eventName, () => elements.dropArea.classList.add('highlight'), false);
        });

        ['dragleave', 'drop'].forEach(eventName => {
            elements.dropArea.addEventListener(eventName, () => elements.dropArea.classList.remove('highlight'), false);
        });

        elements.dropArea.addEventListener('drop', e => {
            selectedFiles = Array.from(e.dataTransfer.files);
            renderFileList();
            log(`üìÅ ${selectedFiles.length} arquivo(s) selecionado(s) via arrastar e soltar`);
        }, false);

        elements.videoInput.addEventListener('change', e => {
            selectedFiles = Array.from(e.target.files);
            renderFileList();
            log(`üìÅ ${selectedFiles.length} arquivo(s) selecionado(s)`);
        });

        function renderFileList() {
            if (selectedFiles.length === 0) {
                elements.fileList.innerHTML = '<div style="color:#6c757d;font-style:italic;padding:15px;text-align:center;">Nenhum arquivo</div>';
                return;
            }

            elements.fileList.innerHTML = selectedFiles.map((file, idx) => `
                <div class="file-item">
                    <div class="file-meta">
                        <strong>${file.name}</strong><br>
                        <small>üìè ${(file.size/1024/1024).toFixed(2)} MB ‚Ä¢ üé¨ ${file.type}</small>
                    </div>
                </div>
            `).join('');
        }

        function renderConvertedFiles() {
            if (convertedAudios.length === 0) {
                elements.convertedFiles.style.display = 'none';
                return;
            }

            elements.convertedFiles.style.display = 'block';
            elements.convertedList.innerHTML = convertedAudios.map((audio, idx) => `
                <div class="converted-item">
                    <div class="converted-header">
                        <div class="converted-name">üéµ ${audio.name}</div>
                        <div class="converted-size">${(audio.size/1024/1024).toFixed(2)} MB</div>
                    </div>
                    <audio controls class="audio-player">
                        <source src="${audio.url}" type="audio/wav">
                    </audio>
                    <div class="converted-controls">
                        <button onclick="downloadAudio(${idx})" class="btn btn-success">üíæ Baixar</button>
                        <button onclick="removeAudio(${idx})" class="btn btn-danger">üóëÔ∏è Remover</button>
                    </div>
                </div>
            `).join('');
        }

        window.downloadAudio = (idx) => {
            const audio = convertedAudios[idx];
            const a = document.createElement('a');
            a.href = audio.url;
            a.download = audio.name;
            a.click();
            log(`üíæ Download: ${audio.name}`);
        };

        window.removeAudio = async (idx) => {
            const audio = convertedAudios[idx];
            URL.revokeObjectURL(audio.url);
            
            await deleteAudioFromDB(audio.id);
            convertedAudios.splice(idx, 1);
            
            renderConvertedFiles();
            log(`üóëÔ∏è Removido: ${audio.name}`);
        };

        async function extractAudio(file) {
            try {
                const arrayBuffer = await file.arrayBuffer();
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                return await audioContext.decodeAudioData(arrayBuffer);
            } catch (err) {
                throw new Error(`Extra√ß√£o de √°udio falhou: ${err.message}`);
            }
        }

        async function convertWithWebAudio(file) {
            try {
                const audioBuffer = await extractAudio(file);
                const wav = audioBufferToWav(audioBuffer);
                const blob = new Blob([wav], { type: 'audio/wav' });
                return blob;
            } catch (err) {
                throw new Error(`Web Audio falhou: ${err.message}`);
            }
        }

        function audioBufferToWav(buffer) {
            const length = buffer.length;
            const numberOfChannels = buffer.numberOfChannels;
            const sampleRate = buffer.sampleRate;
            const arrayBuffer = new ArrayBuffer(44 + length * numberOfChannels * 2);
            const view = new DataView(arrayBuffer);
            
            const writeString = (offset, string) => {
                for (let i = 0; i < string.length; i++) {
                    view.setUint8(offset + i, string.charCodeAt(i));
                }
            };
            
            writeString(0, 'RIFF');
            view.setUint32(4, 36 + length * numberOfChannels * 2, true);
            writeString(8, 'WAVE');
            writeString(12, 'fmt ');
            view.setUint32(16, 16, true);
            view.setUint16(20, 1, true);
            view.setUint16(22, numberOfChannels, true);
            view.setUint32(24, sampleRate, true);
            view.setUint32(28, sampleRate * numberOfChannels * 2, true);
            view.setUint16(32, numberOfChannels * 2, true);
            view.setUint16(34, 16, true);
            writeString(36, 'data');
            view.setUint32(40, length * numberOfChannels * 2, true);
            
            let offset = 44;
            for (let i = 0; i < length; i++) {
                for (let channel = 0; channel < numberOfChannels; channel++) {
                    const sample = Math.max(-1, Math.min(1, buffer.getChannelData(channel)[i]));
                    view.setInt16(offset, sample * 0x7FFF, true);
                    offset += 2;
                }
            }
            
            return arrayBuffer;
        }

        async function processIndividualFiles() {
            while (processingQueue.length > 0) {
                const file = processingQueue.shift();
                const fileIndex = selectedFiles.findIndex(f => f === file);
                const totalFiles = selectedFiles.length;

                setProgress(((totalFiles - processingQueue.length) / totalFiles) * 100, `Processando ${file.name} (${fileIndex + 1} de ${totalFiles})...`);
                log(`üîÑ Processando ${file.name} individualmente...`);

                try {
                    const resultBlob = await convertWithWebAudio(file);
                    const name = file.name.replace(/\.[^/.]+$/, '') + '.wav';
                    
                    const savedAudio = await saveAudioToDB({
                        name: name,
                        size: resultBlob.size,
                        blob: resultBlob
                    });

                    convertedAudios.push({
                        ...savedAudio,
                        url: URL.createObjectURL(savedAudio.blob)
                    });

                    log(`üéµ Adicionado ao armazenamento: ${name}`, 'success');
                    
                } catch (err) {
                    log(`‚ùå Erro em ${file.name}: ${err.message}`, 'error');
                }
            }

            isProcessing = false;
            elements.convertBtn.disabled = false;
            elements.convertBtn.textContent = 'üéµ Converter';
            setProgress(100, 'Conclu√≠do!');
            log('üéâ Processamento individual finalizado!', 'success');
            renderConvertedFiles();
        }

        async function processMergedFiles() {
            if (selectedFiles.length === 0) return;

            isProcessing = true;
            elements.convertBtn.disabled = true;
            elements.convertBtn.textContent = 'Convertendo...';
            
            const audioContext = new (window.AudioContext || window.webkitAudioContext)();
            const buffers = [];
            let totalLength = 0;

            for (let i = 0; i < selectedFiles.length; i++) {
                const file = selectedFiles[i];
                setProgress(((i / selectedFiles.length) * 100), `Decodificando ${file.name} (${i + 1} de ${selectedFiles.length})...`);
                log(`üîÑ Decodificando ${file.name}...`);
                try {
                    const audioBuffer = await audioContext.decodeAudioData(await file.arrayBuffer());
                    buffers.push(audioBuffer);
                    totalLength += audioBuffer.length;
                } catch (err) {
                    log(`‚ùå Falha ao decodificar ${file.name}: ${err.message}`, 'error');
                }
            }

            setProgress(90, 'Mesclando √°udios...');
            log('üîó Mesclando todos os √°udios...');

            const mergedBuffer = audioContext.createBuffer(
                buffers[0].numberOfChannels,
                totalLength,
                buffers[0].sampleRate
            );
            
            let offset = 0;
            for (const buffer of buffers) {
                for (let channel = 0; channel < buffer.numberOfChannels; channel++) {
                    mergedBuffer.copyToChannel(buffer.getChannelData(channel), channel, offset);
                }
                offset += buffer.length;
            }

            const wav = audioBufferToWav(mergedBuffer);
            const blob = new Blob([wav], { type: 'audio/wav' });
            const name = `audio_mesclado_${Date.now()}.wav`;

            const savedAudio = await saveAudioToDB({
                name: name,
                size: blob.size,
                blob: blob
            });

            convertedAudios.push({
                ...savedAudio,
                url: URL.createObjectURL(savedAudio.blob)
            });

            isProcessing = false;
            elements.convertBtn.disabled = false;
            elements.convertBtn.textContent = 'üéµ Converter';
            setProgress(100, 'Conclu√≠do!');
            log('üéâ Processamento de mesclagem finalizado!', 'success');
            renderConvertedFiles();
        }

        async function loadFromDB() {
            log('üîç Buscando arquivos no armazenamento local...');
            try {
                const audiosFromDB = await getAudiosFromDB();
                convertedAudios = audiosFromDB.map(audio => ({
                    ...audio,
                    url: URL.createObjectURL(audio.blob)
                }));
                renderConvertedFiles();
                if (convertedAudios.length > 0) {
                    log(`‚úÖ ${convertedAudios.length} arquivo(s) encontrado(s) e carregado(s)!`, 'success');
                } else {
                    log('Nenhum arquivo encontrado.');
                }
            } catch (err) {
                log(`‚ùå Erro ao carregar arquivos: ${err.message}`, 'error');
            }
        }

        elements.convertBtn.addEventListener('click', () => {
            if (isProcessing) return;
            if (selectedFiles.length === 0) {
                alert('Selecione arquivos primeiro!');
                return;
            }
            if (conversionMode === 'individual') {
                processingQueue = [...selectedFiles];
                convertedAudios = [];
                processIndividualFiles();
            } else if (conversionMode === 'merged') {
                if (selectedFiles.length < 2) {
                    alert('Selecione pelo menos 2 arquivos para mesclar!');
                    return;
                }
                convertedAudios = [];
                processMergedFiles();
            }
        });

        elements.clearBtn.addEventListener('click', () => {
            selectedFiles = [];
            processingQueue = [];
            elements.videoInput.value = '';
            renderFileList();
            elements.log.innerHTML = '';
            setProgress(0, 'Limpo!');
            log('üßπ Arquivos de entrada e log limpos.');
        });

        elements.clearDBBtn.addEventListener('click', async () => {
            const confirmClear = confirm('Tem certeza de que deseja remover todos os arquivos do armazenamento do navegador?');
            if (confirmClear) {
                await clearDB();
                convertedAudios.forEach(audio => URL.revokeObjectURL(audio.url));
                convertedAudios = [];
                renderConvertedFiles();
                log('üóëÔ∏è Todo o armazenamento local foi limpo!', 'success');
            }
        });

        // Inicializa√ß√£o
        (async () => {
            log('üöÄ Extrator de √°udio carregado!');
            log('üí° Este sistema n√£o usa FFmpeg, mas extrai o √°udio com APIs do navegador no formato WAV.');
            await openDB();
            loadFromDB();
        })();
    </script>
</body>
</html>
